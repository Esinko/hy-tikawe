<div class="challenge" id="chall-{{ challenge.id }}">
    <form class="vote stack" action="{{ '/api/vote/challenge/' + (challenge.id | string) if 'user' in session else '/login' }}" method="POST">
        <input name="vote_action" type="hidden" value="{{ 0 if challenge.has_my_vote else 1 }}">
        <input name="from_page" type="hidden" value="{{ request.path }}">
        <button
            type="submit"
        >
            <svg
                xmlns="http://www.w3.org/2000/svg"
                width="24"
                height="24"
                viewBox="0 0 24 24"
                fill="none"
                style="stroke: {{ 'var(--very-yellow)' if challenge.has_my_vote else 'black' }}"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
            >
                <path d="M6 15l6 -6l6 6" />
            </svg>
        </button>
        <p>{{ challenge.votes }}</p>
    </form>
    <div class="stack" style="width: 100%">
        <a href="/chall/{{ challenge.id }}">{{ challenge.title }}</a>
        <p style="margin: 0px 0px 2px 0px;">{{ challenge.created | epoch_to_date }}</p>
        <div class="row">
            {% if challenge.author_image_id is not none %}
            <img width="30px" height="30px" class="profile-image" src="/a/{{ session.user.profile.image_asset.id }}"></img>
            {% else %}
            <p class="profile-text">{{ challenge.author_name[0].upper() + challenge.author_name[1] }}</p>
            {% endif %}
            <p style="margin-left: 10px">{{ challenge.author_name }}</p>
        </div>
        <p>{{ challenge.body }}</p>
    </div>
</div>
